<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.49" />


    <title>Frequently Asked Questions - KrakenD API Gateway</title>
    <meta itemprop="name" content="Frequently Asked Questions - KrakenD API Gateway">
    <meta name="twitter:title" content="Frequently Asked Questions - KrakenD API Gateway">
    <meta property="og:title" content="Frequently Asked Questions - KrakenD API Gateway">

    
    <meta property="description" content="Frequently Asked Questions">
    <meta itemprop="description" content="Frequently Asked Questions">
    <meta name="twitter:description" content="Frequently Asked Questions">
    <meta property="og:description" content="Frequently Asked Questions">
    

    
    <meta itemprop="image" content="https://www.krakend.io/images/logo.png">
    <meta name="twitter:image:src" content="https://www.krakend.io/images/logo.png">
    <meta property="og:image" content="https://www.krakend.io/images/logo.png" />
    

    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://www.krakend.io/docs/faq/" />



<meta name="twitter:site" content="@devopsfaith">
<meta name="twitter:creator" content="@devopsfaith">
<meta name="twitter:card" content="summary">


<meta property="og:site_name" content="KrakenD - Ultra-High performance API Gateway with middlewares" />




<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

<link rel="stylesheet" href="https://www.krakend.io/dist/bootstrap/css/bootstrap.min.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">


<link rel="stylesheet" href="https://www.krakend.io/dist/css/AdminLTE.min.css">
<link rel="stylesheet" href="https://www.krakend.io/dist/css/skin-black-light.min.css">
<link rel="stylesheet" href="https://www.krakend.io/dist/css/custom.css">






</head>
<body class="hold-transition sidebar-mini skin-black-light">
    <div class="wrapper">
            
    <header class="main-header">

        
        <a href="https://www.krakend.io/" class="logo">
            
      <span class="logo-mini">
        <img src="https://www.krakend.io/images/logo-mini.png" alt="">
      </span>
            
            <img src="https://www.krakend.io/images/logo-inverse.png" alt="KrakenD logo" height="35">
        </a>
        
        <nav class="navbar navbar-static-top" role="navigation">
            

            <button type="button" class="navbar-toggle collapsed pull-left" data-toggle="collapse" data-target="#navbar-collapse">
                <i class="fa fa-bars"></i>
            </button>

            <div class="navbar-collapse pull-left collapse" id="navbar-collapse">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="https://www.krakend.io/features">Features</a>
                    </li>
                    <li>
                        <a href="https://www.krakend.io/download/">Download</a>
                    </li>
                    <li><a href="https://www.krakend.io/docs/overview/introduction">Documentation</a></li>

                    
                    <li><a href="https://www.krakend.io/blog">Blog</a></li>
                    <li><a href="https://www.krakend.io/support">Support</a></li>
                </ul>
                
            </div>

            
            <div class="navbar-custom-menu">

                <ul class="nav navbar-nav">
                    <li class="github-container">
                        <a class="github-button" href="https://github.com/devopsfaith/krakend" data-icon="octicon-star" data-show-count="true" aria-label="Star devopsfaith/krakend on GitHub">Star</a>
                    </li>
                    <li>
                        <a href="http://designer.krakend.io/">Go to KrakenDesigner</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
        <aside class="main-sidebar">
            <section class="sidebar">
                
                <ul class="sidebar-menu">
    <li class="header">Documentation</li>
    
    
    
        
        <li class="treeview">
            <a href="javascript:;">
                <i class='fa fa-road'></i> <span>Getting Started</span>
                <span class="pull-right-container">
                    <i class="fa fa-angle-left pull-right"></i>
                </span>
            </a>
            <ul class="treeview-menu">
            
                <li class="">
                    <a href="/docs/overview/introduction/"><i class="fa fa-circle-o"></i> Introduction</a>
                </li>
            
                <li class="">
                    <a href="/docs/overview/installing/"><i class="fa fa-circle-o"></i> Installing KrakenD</a>
                </li>
            
                <li class="">
                    <a href="/docs/overview/usage/"><i class="fa fa-circle-o"></i> Using KrakenD</a>
                </li>
            
                <li class="">
                    <a href="/docs/overview/configuration/"><i class="fa fa-circle-o"></i> Configuration file</a>
                </li>
            
                <li class="">
                    <a href="/docs/overview/krakend-vs-krakend-ce/"><i class="fa fa-circle-o"></i> KrakenD vs KrakenD-CE</a>
                </li>
            
                <li class="">
                    <a href="/docs/overview/playground/"><i class="fa fa-circle-o"></i> The Playground</a>
                </li>
            
            </ul>
        </li>
        
    
        
        <li class="treeview">
            <a href="javascript:;">
                <i class='fa fa-check'></i> <span>Endpoints Features</span>
                <span class="pull-right-container">
                    <i class="fa fa-angle-left pull-right"></i>
                </span>
            </a>
            <ul class="treeview-menu">
            
                <li class="">
                    <a href="/docs/features/response-manipulation/"><i class="fa fa-circle-o"></i> Response manipulation</a>
                </li>
            
                <li class="">
                    <a href="/docs/features/concurrent-requests/"><i class="fa fa-circle-o"></i> Concurrent Requests</a>
                </li>
            
                <li class="">
                    <a href="/docs/features/parameter-forwarding/"><i class="fa fa-circle-o"></i> Parameter forwarding</a>
                </li>
            
                <li class="">
                    <a href="/docs/features/security/"><i class="fa fa-circle-o"></i> Security</a>
                </li>
            
                <li class="">
                    <a href="/docs/features/content-types/"><i class="fa fa-circle-o"></i> Content Types</a>
                </li>
            
                <li class="">
                    <a href="/docs/features/other/"><i class="fa fa-circle-o"></i> Other</a>
                </li>
            
            </ul>
        </li>
        
    
        
        <li class="treeview">
            <a href="javascript:;">
                <i class='fa fa-heartbeat'></i> <span>Throttling and Limits</span>
                <span class="pull-right-container">
                    <i class="fa fa-angle-left pull-right"></i>
                </span>
            </a>
            <ul class="treeview-menu">
            
                <li class="">
                    <a href="/docs/throttling/overview/"><i class="fa fa-circle-o"></i> Throttling Overview</a>
                </li>
            
                <li class="">
                    <a href="/docs/throttling/circuit-breaker/"><i class="fa fa-circle-o"></i> Circuit Breaker</a>
                </li>
            
                <li class="">
                    <a href="/docs/throttling/rate-limit/"><i class="fa fa-circle-o"></i> Rate Limits</a>
                </li>
            
                <li class="">
                    <a href="/docs/throttling/timeouts/"><i class="fa fa-circle-o"></i> Timeouts</a>
                </li>
            
                <li class="">
                    <a href="/docs/throttling/max-idle-connections/"><i class="fa fa-circle-o"></i> Max IDLE connections</a>
                </li>
            
            </ul>
        </li>
        
    
        
        <li class="treeview">
            <a href="javascript:;">
                <i class='fa fa-space-shuttle'></i> <span>Command line commands</span>
                <span class="pull-right-container">
                    <i class="fa fa-angle-left pull-right"></i>
                </span>
            </a>
            <ul class="treeview-menu">
            
                <li class="">
                    <a href="/docs/commands/run/"><i class="fa fa-circle-o"></i> Run</a>
                </li>
            
                <li class="">
                    <a href="/docs/commands/check/"><i class="fa fa-circle-o"></i> Check</a>
                </li>
            
            </ul>
        </li>
        
    
        
        <li class="treeview">
            <a href="javascript:;">
                <i class='fa fa-bar-chart'></i> <span>Benchmarks</span>
                <span class="pull-right-container">
                    <i class="fa fa-angle-left pull-right"></i>
                </span>
            </a>
            <ul class="treeview-menu">
            
                <li class="">
                    <a href="/docs/benchmarks/overview/"><i class="fa fa-circle-o"></i> Benchmarks Overview</a>
                </li>
            
                <li class="">
                    <a href="/docs/benchmarks/api-gateway-benchmark/"><i class="fa fa-circle-o"></i> KrakenD vs others</a>
                </li>
            
                <li class="">
                    <a href="/docs/benchmarks/aws/"><i class="fa fa-circle-o"></i> On Amazon Web Services</a>
                </li>
            
                <li class="">
                    <a href="/docs/benchmarks/local/"><i class="fa fa-circle-o"></i> Local machine</a>
                </li>
            
            </ul>
        </li>
        
    
        
        <li class="treeview">
            <a href="javascript:;">
                <i class='fa fa-connectdevelop'></i> <span>Cluster</span>
                <span class="pull-right-container">
                    <i class="fa fa-angle-left pull-right"></i>
                </span>
            </a>
            <ul class="treeview-menu">
            
                <li class="">
                    <a href="/docs/cluster/cluster-overview/"><i class="fa fa-circle-o"></i> Overview</a>
                </li>
            
                <li class="">
                    <a href="/docs/cluster/configuration/"><i class="fa fa-circle-o"></i> Cluster configuration</a>
                </li>
            
                <li class="">
                    <a href="/docs/cluster/subscription-levels/"><i class="fa fa-circle-o"></i> Subscription levels</a>
                </li>
            
            </ul>
        </li>
        
    
        
        <li class="treeview active">
            <a href="/docs/faq/">
                <i class='fa fa-wrench'></i>  <span>Troubleshooting</span>
            </a>
        </li>
        
    
        
        <li class="treeview">
            <a href="http://github.com/devopsfaith/krakend-ce/issues">
                <i class='fa fa-github'></i>  <span>Issues</span>
            </a>
        </li>
        
    
</ul>
                
            </section>
        </aside>

        <div class="content-wrapper">
            <section class="content-header">
                
<a class="btn btn-default pull-right"
href="https://github.com/devopsfaith/krakend-documentation/tree/master/faq.md">
    <span><i class="fa fa-edit"></i> Edit this page</span>
</a>
<h1>
    Frequently Asked Questions
</h1>

            </section>
            <section class="content">
                
<div class="row">
    <section class="col-md-12 docs">

        <div class="box box-primary">
            <div class="box-body">
                
                
                <div class="pull-right col-md-4 visible-lg-inline TOC">
                    <div class="box">
                    <div class="box-header with-border">
                        <h5 class="box-title"><i class="fa fa-book"></i> Table of Contents</h5>
                        <div class="pull-right">
                            <a data-widget="collapse"><i class="fa fa-minus"></i></a>
                        </div>
                    </div>

                        <div class="box-body">
                            <nav id="TableOfContents">
<ul>
<li><a href="#understanding-the-behaviour">Understanding the behaviour</a>
<ul>
<li><a href="#i-am-getting-a-200-status-when-the-backend-returns-a-201">I am getting a <code>200</code> status when the backend returns a <code>201</code></a>
<ul>
<li><a href="#explanation">Explanation</a></li>
</ul></li>
<li><a href="#i-am-getting-a-500-status-when-the-backend-returns-anything-but-200-201-or-redirects">I am getting a <code>500</code> status when the backend returns anything but <code>200</code>, <code>201</code> or redirects</a>
<ul>
<li><a href="#explanation-1">Explanation</a></li>
</ul></li>
<li><a href="#i-am-seeing-frequent-503-errors-in-the-logs">I am seeing frequent <code>503</code> errors in the logs</a>
<ul>
<li><a href="#solution">Solution</a></li>
</ul></li>
<li><a href="#i-am-having-empty-responses">I am having empty responses</a>
<ul>
<li><a href="#solution-to-cuts-by-timeout">Solution to cuts by timeout</a></li>
<li><a href="#solution-to-invalid-responses">Solution to invalid responses.</a></li>
</ul></li>
<li><a href="#reserved-endpoints">Reserved endpoints</a></li>
</ul></li>
</ul>
</nav>
                        </div>
                    </div>
                </div>
                

                

<h1 id="understanding-the-behaviour">Understanding the behaviour</h1>

<h2 id="i-am-getting-a-200-status-when-the-backend-returns-a-201">I am getting a <code>200</code> status when the backend returns a <code>201</code></h2>

<p>E.g:</p>

<pre><code>2017/01/19 - 10:31:27 | 200 |    1.134431ms | ::1 |   POST     /users
</code></pre>

<h3 id="explanation">Explanation</h3>

<p>By default, the gateway will always send a HTTP status 200 if the backend returns a 200 or a 201. You can inject your own HTTPStatusHandler implementation if you need a different behaviour. Check this <a href="https://github.com/devopsfaith/krakend/issues/102#issuecomment-373657911">issue comment</a> for more details.</p>

<h2 id="i-am-getting-a-500-status-when-the-backend-returns-anything-but-200-201-or-redirects">I am getting a <code>500</code> status when the backend returns anything but <code>200</code>, <code>201</code> or redirects</h2>

<p>E.g:</p>

<pre><code>2017/01/19 - 10:31:37 | 500 |    1.007191ms | ::1 |   POST     /users_ko
</code></pre>

<h3 id="explanation-1">Explanation</h3>

<p>By default, the gateway will always send a HTTP status 200 if the backend returns a 500 for any status above 400. You can inject your own HTTPStatusHandler implementation if you need a different behaviour. Check this <a href="https://github.com/devopsfaith/krakend/issues/102#issuecomment-373657911">issue comment</a> for more details.</p>

<h2 id="i-am-seeing-frequent-503-errors-in-the-logs">I am seeing frequent <code>503</code> errors in the logs</h2>

<p>E.g:</p>

<pre><code>2016/11/13 - 18:01:18 | 200 |    5.352143ms | ::1 |   GET     /frontpage
2016/11/13 - 18:01:18 | 503 |       5.662µs | ::1 |   GET     /frontpage
2016/11/13 - 18:01:18 | 503 |       5.662µs | ::1 |   GET     /frontpage
</code></pre>

<p>The <code>maxRate</code> setting defines the maximum number of requests allowed in a single second to an endpoint or backend. When this number is reached, subsequent connections are rejected with a <code>503</code> error. This limitation is optional and is usually set to avoid hammering your own backends and compromising their stability.</p>

<h3 id="solution">Solution</h3>

<p>Increase the <code>maxRate</code> number or disable it (<code>maxRate = 0</code>). This setting can be set globally for all the endpoints,
or overridden individually per endpoint.</p>

<p>Remember: failing fast is always better than overloading your infrastructure and degrading the quality of your entire services.</p>

<h2 id="i-am-having-empty-responses">I am having empty responses</h2>

<p>The main reasons for having responses are:</p>

<ul>
<li><strong>Timeout</strong> when connecting the backend. The KrakenD service will cut the connection and will return and empty response if the backend does not respond in the time you set through the <code>timeout</code> variable. This variable is usually written in magnitude of <strong>milliseconds</strong>.</li>
<li><strong>Invalid JSON/XML</strong>. When the backend received a malformed object as response and could not decode it.</li>
</ul>

<p>See the solutions below.</p>

<h3 id="solution-to-cuts-by-timeout">Solution to cuts by timeout</h3>

<p>Whenever possible add caching layers in your backends, scale the infrastructure, etc. so that can answer requests in a
decent time. Increasing the <code>timeout</code> variable is an option but but should be always <strong>your last option</strong>. If your
backends are not able to respond in a short time think that when you increment the timeout what you really do is
to block connections waiting for the backend. The memory consumption will increase and the number of connections you can
open are finite. In a gateway your focus should be freeing the connections as soon as possible.</p>

<p>Values above <code>2000ms</code> are not recommended.</p>

<h3 id="solution-to-invalid-responses">Solution to invalid responses.</h3>

<p>Make sure your backend sources return valid Json/Xml/&hellip; data. Try any on-line service to check the validity and format
of the returned content. If the response of your API is a collection, e.g: response comes inside brackets <code>[]</code>, then make sure to mark the option <code>Treat the response as a collection, not an object.</code> in the form.</p>

<h2 id="reserved-endpoints">Reserved endpoints</h2>

<p>The following names cannot be used as endpoint names as they are reserved:</p>

<pre><code>/__debug/
/favicon.ico
</code></pre>


                <div class="col-md-12">
                    <hr/>
                    <p class="pull-right">
                        <a class="btn btn-primary btn-circle" href="/support">Need support?</a>
                    </p>
                </div>
            </div>
    </section>
</div>

            </section>
        </div>
    </div>
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-5">
                <img src="/images/logo-inverse.png" >
                <p class="lead">The <strong>Ultra-High performance</strong> API Gateway with middlewares</p>
                <span>KrakenD helps application developers release features quickly by eliminating all the complexities of SOA architectures, while offering a unique performance.</span>
                <div class="social">
                    <a href="https://www.facebook.com/apigateway" target="_blank"  title="Facebook">
                        <i class="fa fa-facebook-official" aria-hidden="true"></i><span class="sr-only">Facebook</span>
                    </a>
                    <a href="https://twitter.com/devopsfaith" target="_blank" class="social-btn-twitter" title="Twitter">
                        <i class="fa fa-twitter" aria-hidden="true"></i><span class="sr-only">Twitter</span>
                    </a>
                    <a href="https://github.com/devopsfaith" target="_blank" class="social-btn-github" title="GitHub">
                        <i class="fa fa-github" aria-hidden="true"></i><span class="sr-only">GitHub</span>
                    </a>
                    <a href="mailto:hello@krakend.io" target="_blank" title="Send us an email">
                        <i class="fa fa-envelope" aria-hidden="true"></i><span class="sr-only">Mail</span>
                    </a>
                </div>

            </div>
            <nav>
                <div class="col-md-2 col-md-offset-1">
                    <h6>Devops Faith</h6>
                    <ul class="list-unstyled">
                        
                        <li><a href="http://devops.faith">Devops Faith</a></li>
                        <li><a href="https://medium.com/devops-faith">Blog</a></li>
                        <li><a href="mailto:hello@krakend.io">Contact Us</a></li>
                    </ul>
                    <h6>More products</h6>
                    <ul class="list-unstyled">
                        <li><a href="http://api2html.com">API2HTML</a></li>
                    </ul>

                </div>
                <div class="col-md-2">
                    <h6>Product</h6>
                    <ul class="list-unstyled">
                        <li><a href="https://www.krakend.io/features/">Features</a></li>
                        <li><a href="https://www.krakend.io/docs/benchmarks/overview/">Benchmarks</a></li>
                        <li><a href="https://www.krakend.io/download/">Download</a></li>
                        <li><a href="https://www.krakend.io/blog/">KrakenD Blog</a></li>

                    </ul>

                </div>
                <div class="col-md-2">
                    <h6>Support</h6>
                    <ul class="list-unstyled">
                        <li><a href="https://www.krakend.io/docs/overview/introduction">Documentation</a></li>
                        <li><a href="https://github.com/devopsfaith/krakend" target="_blank">Open Source</a></li>
                        <li><a href="https://github.com/devopsfaith/krakend/issues">Report a problem</a></li>
                        <li><a href="https://www.krakend.io/support/">Support</a></li>
                        

                    </ul>
                </div>
            </nav>
        </div>
        <div class="row">
            <div class="col-md-5 additional-links">
                <strong>Copyright &copy; 2017-2018 <a href="http://devops.faith">Devops Faith</a>.</strong> All rights reserved.
            </div>
            <div class="pull-right hidden-xs">
                Made with <i class="fa fa-heart-o" style="color:hotpink"></i> in Barcelona by <a href="https://twitter.com/devopsfaith">
                    <img height="30px" src="/images/devops-faith-logo-inverse.png" />
                </a>


            </div>
        </div>
    </div>
</footer>

    
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-87994359-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    <script src="https://www.krakend.io/dist/js/jquery-2.2.3.min.js"></script>
<script src="https://www.krakend.io/dist/js/bootstrap.min.js"></script>
<script src="https://www.krakend.io/dist/js/app.min.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
    
</body>
</html>